#!name=å»å¹¿å‘Šï½œçŸ¥ä¹
#!desc=çŸ¥ä¹å»å¹¿å‘Š [å»ºè®®å¸è½½é‡è£…]\nä½œè€…ï¼šRuCu6 blackmatrix7
#!author=RuCu6 blackmatrix7
#!icon=https://gitlab.com/lodepuly/iconlibrary/-/raw/main/App_icon/120px/Zhihu.png
#!category=âš™ï¸ â–¸ NoAds
#!homepage=https://gitlab.com/lodepuly/vpn_tool/-/tree/master/Tool/Loon/Plugin
#!date=2024-02-19 20:05:06

# ğŸ”— æ¨¡å—é“¾æ¥
#SUBSCRIBED http://script.hub/file/_start_/https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Plugin/Zhihu_remove_ads.plugin/_end_/%E5%8E%BB%E5%B9%BF%E5%91%8A%EF%BD%9C%E7%9F%A5%E4%B9%8E.sgmodule?n=%E5%8E%BB%E5%B9%BF%E5%91%8A%EF%BD%9C%E7%9F%A5%E4%B9%8E%2B%E7%9F%A5%E4%B9%8E%E5%8E%BB%E5%B9%BF%E5%91%8A%20%5B%E5%BB%BA%E8%AE%AE%E5%8D%B8%E8%BD%BD%E9%87%8D%E8%A3%85%5D%5Cn%E4%BD%9C%E8%80%85%EF%BC%9A%40RuCu6%20%40blackmatrix7&type=loon-plugin&target=surge-module&del=true&nore=true&category=%E2%9A%99%EF%B8%8F%20%E2%96%B8%20NoAds


[Rule]
# çŸ¥ä¹
DOMAIN,appcloud.zhihu.com,REJECT
DOMAIN,appcloud2.in.zhihu.com,REJECT
DOMAIN,crash2.zhihu.com,REJECT
DOMAIN,mqtt.zhihu.com,REJECT
DOMAIN,sugar.zhihu.com,REJECT
DOMAIN,zxid-m.mobileservice.cn,REJECT
IP-CIDR,103.41.167.237/32,REJECT,no-resolve
IP-CIDR,118.89.204.198/32,REJECT,no-resolve
IP-CIDR6,2402:4e00:1200:ed00:0:9089:6dac:96b6/128,REJECT,no-resolve

[URL Rewrite]
^https:\/\/api\.zhihu\.com\/unlimited\/go\/my_card - reject
# å…¶ä»– - æœåŠ¡å™¨æ¨é€é…ç½®
^https:\/\/api\.zhihu\.com\/ab\/api\/v1\/products\/zhihu\/platforms\/ios\/config - reject
^https:\/\/link\.zhihu\.com\/\?target=(https?)?(%3A|:)?(\/\/|%2F%2F)?(.*?)(&source.*)?$ http://$4 302
^https:\/\/www\.zhihu\.com\/api\/v4\/hot_recommendation - reject
^https:\/\/www\.zhihu\.com\/api\/v4\/mcn\/v2\/linkcards\? - reject
^https:\/\/www\.zhihu\.com\/api\/v4/(answers|questions)\/\d+/related-readings - reject
^https:\/\/www\.zhihu\.com\/commercial_api\/banners_v3\/mobile_banner - reject
^https:\/\/zhuanlan\.zhihu\.com\/api\/articles\/\d+\/recommendation - reject

[Map Local]
# é¦–é¡µ - æ‚¬æµ®å›¾æ ‡ã€é¡¶éƒ¨æ¨ªå¹…ã€å¼€å±å¹¿å‘Šã€å…³æ³¨é¡µæ¨èã€æ¨èä¿¡æ¯æµã€çƒ­æ¦œä¿¡æ¯æµã€çƒ­æ¦œç›´æ’­ã€å›ç­”åº•éƒ¨å¡ç‰‡
^https:\/\/api\.zhihu\.com\/commercial_api\/(answer\/\d+\/bottom-v2|banners_v3\/app_topstory_banner|launch_v2|real_time_launch_v2) data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/api\.zhihu\.com\/content-distribution-core\/bubble\/common\/settings data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/api\.zhihu\.com\/(moments\/lastread|drama\/hot-drama-list) data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/api\.zhihu\.com\/root\/window data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

# ä¼šå‘˜é¡µé¢ - å¼¹çª—ã€æ‚¬æµ®åŠ¨å›¾
^https:\/\/api\.zhihu\.com\/(bazaar\/float_window|market\/popovers_v2) data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

# æˆ‘çš„é¡µé¢ - é¡¹ç›®åˆ—è¡¨ã€ä¼šå‘˜å¡ç‰‡
^https:\/\/api\.zhihu\.com\/me\/guides data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

# æœç´¢é¡µ - å…³é”®è¯ã€çŒœä½ æƒ³æœ
^https:\/\/api\.zhihu\.com\/search\/preset_words data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/www\.zhihu\.com\/api\/v4\/search\/related_queries\/(article|answer)\/\d+ data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

# å›ç­”è¯¦æƒ…é¡µ - è¯„è®ºåŒºé¡¶éƒ¨ã€ä¸‹ä¸€ä¸ªå›ç­”
^https:\/\/api\.zhihu\.com\/comment_v5\/(articles|answers)\/\d+\/list-headers data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/api\.zhihu\.com\/prague\/related_suggestion_native\/feed\? data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/api\.zhihu\.com\/v5\.1\/topics\/answer\/\d+\/relation data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/api\.zhihu\.com\/ad-style-service\/request data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

^https:\/\/appcloud2\.zhihu\.com\/v3\/resource\?group_name=mp data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

# ç½‘é¡µç‰ˆå»å¹¿å‘Š //www.zhihu.com, zhuanlan.zhihu.com
^https:\/\/api\.zhihu\.com\/distribute\/rhea\/qa_ad_card\/h5\/recommendation\? data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"

[Script]
# é¦–é¡µ - æ‚¬æµ®å›¾æ ‡ã€é¡¶éƒ¨æ¨ªå¹…ã€å¼€å±å¹¿å‘Šã€å…³æ³¨é¡µæ¨èã€æ¨èä¿¡æ¯æµã€çƒ­æ¦œä¿¡æ¯æµã€çƒ­æ¦œç›´æ’­ã€å›ç­”åº•éƒ¨å¡ç‰‡
ç§»é™¤é¦–é¡µæ¨å¹¿ = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/commercial_api\/app_float_layer, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

ç§»é™¤é¦–é¡µæ¨å¹¿ = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/feed\/render\/tab\/config\?, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

ç§»é™¤é¦–é¡µæ¨å¹¿ = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/(moments_v3|topstory\/hot-lists\/total|topstory\/recommend), script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

ç§»é™¤é¦–é¡µæ¨å¹¿ = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/v2\/topstory\/hot-lists\/everyone-seeing\?, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

# æœç´¢é¡µ - å…³é”®è¯ã€çŒœä½ æƒ³æœ
ç§»é™¤æœç´¢é¡µå…³é”®è¯ = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/search\/recommend_query\/v2\?, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/CommonScript/replace-body.js, requires-body=true, argument=""recommend_queries":\{.+\}->"recommend_queries":{}"

# å›ç­”è¯¦æƒ…é¡µ - è¯„è®ºåŒºé¡¶éƒ¨ã€ä¸‹ä¸€ä¸ªå›ç­”
ç§»é™¤å›ç­”è¯¦æƒ…é¡µæ¨å¹¿ = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/next-(bff|data|render)\?, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

ç§»é™¤å›ç­”è¯¦æƒ…é¡µæ¨å¹¿ = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/questions\/\d+(\/answers|\/feeds|\?include=), script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

ç§»é™¤å›ç­”è¯¦æƒ…é¡µæ¨å¹¿ = type=http-response, pattern=^https:\/\/www\.zhihu\.com\/api\/v4\/(articles|answers)\/\d+\/recommendations?\?, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

# å…¶ä»– - æœåŠ¡å™¨æ¨é€é…ç½®
æ‹¦æˆªæœåŠ¡å™¨æ¨é€é…ç½® = type=http-response, pattern=^https:\/\/appcloud2\.zhihu\.com\/v3\/config, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

æ‹¦æˆªæœåŠ¡å™¨æ¨é€é…ç½® = type=http-response, pattern=^https:\/\/m-cloud\.zhihu\.com\/api\/cloud\/config\/all\?, script-path=https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Resource/Script/Zhihu/Zhihu_remove_ads.js, requires-body=true

[MITM]
hostname = %APPEND% api.zhihu.com, www.zhihu.com, appcloud2.zhihu.com, link.zhihu.com, zhuanlan.zhihu.com, m-cloud.zhihu.com

